<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <script>window.onerror = function(message, url, lineNum) {
          // First check the URL and line number of the error
          url = url || window.location.href;
          // 99% of the time, errors without line numbers arent due to our code,
          // they are due to third party plugins and browser extensions
          if (lineNum === undefined || lineNum == null) return;
          
          // Now figure out the actual error message
          // If it's an event, as triggered in several browsers
          if (message.target && message.type) {
            message = message.type;
          }
          if (!message.indexOf) {
            message = 'Non-string, non-event error: ' + (typeof message);
          }
          
          var errorDescrip = {
            message: message,
            script: url,
            line: lineNum,
            url: document.URL
          }
          
          var err = {
            key: 'page.error.javascript', 
            value: errorDescrip
          }
          
          window._204 = window._204 || [];
          window._204.push(err);
          
          window._gaq = window._gaq || [];
          window._gaq.push(err);
        }</script>
        <title>Backbone+Requirejs Bootstrap</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- build:css(.tmp) css/common.css -->
        <link type="text/css" href="/css/common.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
        <!-- endbuild -->
    </head>
    <body>
        <div id="tmpst" class="tmpst">
            <div style="position:absolute;top:0px;left:0px;width:100%;height:100%;background:#f5f5f5;padding-top:5%;">
              <div>
                <span id="loading-js" style="display: none; padding-left:45%">loading &nbsp;&nbsp;<img src="/img/loading.gif"></span>
              </div>
              <noscript><div id="loading-nojs" style="text-align:center; margin-bottom:10px;">Please use a modern browser with JavaScript enabled.</div></noscript>
              </div>
            </div>
        </div>
        <!--[if gte IE 8]>
        <script>document.getElementById("loading-js").style.display = 'block';</script>
        <![endif]--> 
        <!--[if !IE]> -->
        <script>document.getElementById("loading-js").style.display = 'block';</script>
        <!-- <![endif]-->
        <!-- build:js js/components.js -->
        <!-- bower:js -->
        <script src="/bower_components/requirejs/require.js"></script>
        <!-- endbower -->
        <!-- endbuild -->
        <script type="text/javascript" data-baseurl="/" data-version="v1" data-timestamp='1369439732662' data-debug='0' id="_require">
          if (document.getElementById("loading-js").style.display == 'block') {
              (function (el) {
                  /*
                  //prevent throw errors
                  require.onError = function(err) { 
                      window._204 = window._204 || []; 
                      window._204.push({key: 'requireErr', value: err});
                  };
                  */
                  require.config({
                    enforceDefine: true,
                    waitSeconds: 75,
                    baseUrl: el.getAttribute('data-baseurl'),
                    urlArgs: el.getAttribute('data-debug') == '1' ? 'v=' + el.getAttribute('data-timestamp') : '',
                    shim: {
                      'underscore': {
                        exports: '_'
                      },
                      'backbone': {
                        deps: ['underscore', 'jquery'],
                        exports: 'Backbone',
                        init: function (_, $) {
                            _.noConflict();
                            $.noConflict();
                            return Backbone.noConflict();
                        }
                      }
                    },
                    paths: {
                      'jquery': 'bower_components/jquery/jquery',
                      'underscore': 'bower_components/underscore/underscore',
                      'backbone': 'bower_components/backbone/backbone',
                      'jquery.bbq': 'js/lib/jquery.bbq',
                      'jquery.migrate': 'js/lib/jquery.migrate',
                      'js/models/user.json': 'empty:'
                    },
                    callback: function () {
                      require(['pages/home/routes']); // bootup
                    }
                  });
              })(document.getElementById('_require'));
          }
        </script>
        <script>
          define("js/models/user.json", [], function () {
            var user = '{"name":"zx"}';
            return user && user !== "undefined" ? JSON.parse(user) : null;
          });
        </script>
    </body>  
</html>